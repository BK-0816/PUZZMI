<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PUZZMI - 서울 렌탈친구 서비스</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Noto+Sans+KR:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;700;800&family=Noto+Sans+KR:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@600;800&family=Noto+Sans+KR:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="nav.css"/>
<script type="module" src="nav.js"></script>
</head>

<!-- Supabase JS v2 (ESM) -->
<script type="module">
  // nav.js에서 만든 싱글톤 supabase 재사용 (중복 인스턴스 방지)
  import { supabase } from "./nav.js";

  // ===== 1) 메이트 목록 (페이지네이션) =====
  const ONLY_VERIFIED = false;          // 공개만 노출하려면 true
  const PAGE_SIZE     = 8;
  let page = 0, isLoading = false, hasMore = true;

  const grid = document.querySelector(".friends-grid");
  const loadMoreBtn = document.getElementById("loadMore");

async function refreshHeartCount() {
  const badges = Array.from(document.querySelectorAll('.heart-badge[data-heart]'));
  if (!badges.length) return;

  const ids = [...new Set(badges.map(b => b.getAttribute('data-heart')).filter(Boolean))];

  // 각 메이트별 찜 개수 조회
  const { data, error } = await supabase
    .from('favorites')
    .select('mate_id')
    .in('mate_id', ids);

  if (error) {
    console.warn('heart refresh error:', error);
    return;
  }
  
  const counts = {};
  for (const row of (data || [])) {
    counts[row.mate_id] = (counts[row.mate_id] || 0) + 1;
  }

  for (const id of ids) {
    const n = counts[id] || 0;
    const el = document.querySelector(`.heart-badge[data-heart="${id}"] .count`);
    if (el) el.textContent = n;
  }
}
  // storage key → public URL
  function keyToUrl(key) {
    if (!key) return "";
    if (/^https?:\/\//i.test(key)) return key;
    const pure = key.startsWith("mates/") ? key.replace(/^mates\//,"") : key;
    return supabase.storage.from("mates").getPublicUrl(pure).data.publicUrl;
  }

  // 성별 → 기호
  function genderIcon(gender) {
    const g = (gender || "").toString().trim().toLowerCase();
    if (["female","f","여","여자","woman","여성"].includes(g)) return "♀";
    if (["male","m","남","남자","man","남성"].includes(g))   return "♂";
    return "⚧";
  }

  // 카드 렌더
  function renderCard(row) {
    const name   = row.profiles?.full_name ?? "이름 비공개";
    const age    = row.profiles?.age ? `${row.profiles.age}세` : "";
    const gender = row.profiles?.gender ?? "";
    const langs  = Array.isArray(row.profiles?.languages) ? row.profiles.languages : [];
    const gIcon  = genderIcon(gender);

    const keys   = Array.isArray(row.photos) ? row.photos : [];
    const cover  = row.primary_photo || keys[0] || row.profiles?.avatar_url || "https://picsum.photos/seed/puzzmi/400/300";
    const img    = cover.startsWith("http") ? cover : keyToUrl(cover);

    const priceJpy = new Intl.NumberFormat("ja-JP", { style: "currency", currency: "JPY", maximumFractionDigits: 0 }).format(4000);
    const tagsTxt  = (row.tags ?? []).slice(0,3).join(", ") || "서울 투어";
    const subline  = [gIcon, age].filter(Boolean).join(" • ");


    const card = document.createElement("div");
    card.className = "friend-card";
    card.innerHTML = `
      <div class="friend-image">
        <img src="${img}" alt="${name}">
        <div class="heart-badge" data-heart="${row.user_id}" style="position:absolute;right:8px;top:8px;background:#e0245e;color:#fff;border-radius:16px;padding:4px 8px;font-size:12px;display:flex;gap:6px;align-items:center;">
          <i class="fas fa-heart"></i><span class="count">0</span>
        </div>
      </div>
      <div class="friend-info">
        <h3 class="friend-name">${name}</h3>
        <p class="friend-age">${subline || "정보 미기재"}</p>
        <p class="friend-specialties">${tagsTxt}</p>
        <p class="friend-description">${row.bio ?? "함께 서울의 숨은 명소를 즐겨봐요!"}</p>
        <div class="friend-languages">
          ${langs.map(l => `<span class="language">${l}</span>`).join("")}
        </div>
        <div class="friend-price">
          <span class="price">${priceJpy}</span><span class="duration">/시간</span>
        </div>
        <div style="margin-top:10px; display:flex; gap:8px;">
          <a class="cta-btn" data-requires-auth="true" href="mate_like.html?mate_id=${row.user_id}">프로필 보기</a>
          <a class="cta-btn"          data-requires-auth="true" href="booking.html?mate_id=${row.user_id}">예약하기</a>
          <a class="cta-btn" data-fav-mate="${row.user_id}">찜하기</a>
        </div>
      </div>
    `;
    grid.appendChild(card);

  }

  async function loadMates({ reset=false } = {}) {
    if (!grid || isLoading || (!hasMore && !reset)) return;
    if (reset) { page = 0; hasMore = true; grid.innerHTML = ""; }

    isLoading = true;
    const from = page * PAGE_SIZE;
    const to   = from + PAGE_SIZE - 1;

    // Retry logic for network issues
    let retryCount = 0;
    const maxRetries = 3;
    
    while (retryCount < maxRetries) {
      try {
        let query = supabase
          .from("mate_profiles")
          .select(`
            user_id, bio, hourly_rate, tags, areas, is_verified, rating, photos, primary_photo,
            profiles:profiles ( id, full_name, age, gender, languages, avatar_url )
          `, { count: "exact" })
          .order("rating", { ascending: false })
          .range(from, to);

        if (ONLY_VERIFIED) query = query.eq("is_verified", true);

        const { data, error, count } = await query;

        if (error) {
          throw error;
        }

        // Success - process the data
        (data || []).forEach(renderCard);

        const fetched = (data || []).length;
        const total   = typeof count === "number" ? count : (from + fetched);
        hasMore = (from + fetched) < total;

        if (loadMoreBtn) loadMoreBtn.style.display = hasMore ? "inline-block" : "none";
        if (hasMore) page += 1;

        isLoading = false;
        return; // Success, exit retry loop
        
      } catch (error) {
        console.error(`loadMates error (attempt ${retryCount + 1}):`, error);
        retryCount++;
        
        if (retryCount >= maxRetries) {
          // Final failure after all retries
          if (!grid.innerHTML) {
            grid.innerHTML = `
              <div style="padding:16px; text-align:center;">
                <p>메이트를 불러오지 못했습니다.</p>
                <p style="font-size:0.9em; color:#666; margin-top:8px;">
                  네트워크 연결을 확인하고 페이지를 새로고침해주세요.
                </p>
                <button onclick="location.reload()" style="margin-top:12px; padding:8px 16px; background:#667eea; color:white; border:none; border-radius:4px; cursor:pointer;">
                  새로고침
                </button>
              </div>
            `;
          }
          loadMoreBtn && (loadMoreBtn.style.display = "none");
          isLoading = false;
          return;
        }
        
        // Wait before retry (exponential backoff)
        await new Promise(resolve => setTimeout(resolve, Math.pow(2, retryCount) * 1000));
      }
    }
  }

  loadMoreBtn?.addEventListener("click", () => loadMates());

  // ===== 3) 인증 가드 & 찜하기 처리 =====

  // 찜하기 기능
  document.addEventListener('click', async (e) => {
    const btn = e.target.closest('[data-fav-mate]');
    if (!btn) return;
    e.preventDefault();
    
    // 로그인 체크
    const { data: { user }, error: authErr } = await supabase.auth.getUser();
    if (authErr || !user) {
      const redir = encodeURIComponent(location.pathname + location.search);
      location.href = `auth_combo.html?redirect=${redir}`;
      return;
    }

    const mateId = btn.getAttribute('data-fav-mate');
    const originalText = btn.textContent;
    btn.disabled = true;
    btn.textContent = '처리중...';

    try {
      // 이미 찜했는지 확인
      const { data: existing } = await supabase
        .from('favorites')
        .select('id')
        .eq('user_id', user.id)
        .eq('mate_id', mateId)
        .maybeSingle();

      if (existing) {
        // 이미 찜한 경우 - 찜 해제
        const { error } = await supabase
          .from('favorites')
          .delete()
          .eq('user_id', user.id)
          .eq('mate_id', mateId);
        
        if (error) throw error;
        
        btn.textContent = '찜하기';
        btn.classList.remove('is-faved');
        showToast('💔 찜 해제되었습니다');
      } else {
        // 찜하기
        const { error } = await supabase
          .from('favorites')
          .insert({ user_id: user.id, mate_id: mateId });
        
        if (error) throw error;
        
        btn.textContent = '찜 완료';
        btn.classList.add('is-faved');
        showToast('💖 찜 목록에 추가되었습니다!');
      }

      // 하트 카운트 업데이트
      await refreshHeartCount();
      
    } catch (error) {
      console.error('찜하기 오류:', error);
      btn.textContent = originalText;
      showToast('❌ 오류가 발생했습니다: ' + error.message);
    } finally {
      btn.disabled = false;
    }
  });

  // 토스트 메시지 함수
  function showToast(message) {
    const toast = document.createElement('div');
    toast.style.cssText = `
      position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white; padding: 12px 24px; border-radius: 12px;
      z-index: 9999; font-weight: 600; box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
      animation: slideDown 0.3s ease;
    `;
    toast.textContent = message;
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 3000);
  }


  // 초기 실행
  (async () => {
    await loadMates({ reset: true });
    await refreshHeartCount();
    await loadHomepageReviews();
    
    // 자동 완료 체크 실행
    try {
      const { autoCompleteBookings } = await import('./auto_complete_bookings.js');
      await autoCompleteBookings();
      // 5분마다 자동 완료 체크
      setInterval(autoCompleteBookings, 5 * 60 * 1000);
    } catch (error) {
      console.warn('자동 완료 기능 로드 실패:', error);
    }
  })();

  // ===== 4) 메인페이지 리뷰 로드 =====
  async function loadHomepageReviews() {
    const reviewsGrid = document.getElementById('reviewsGrid');
    if (!reviewsGrid) return;

    try {
      // 평점 높고 글자수 많은 순으로 리뷰 가져오기
      const { data: reviews, error } = await supabase
        .from('reviews')
        .select(`
          id, content, rating, created_at, author_name,
          mate_profiles!inner (
            user_id,
            profiles!inner ( full_name )
          )
        `)
        .not('content', 'is', null)
        .order('rating', { ascending: false })
        .limit(50); // 많이 가져와서 JS에서 정렬

      if (error) {
        console.error('리뷰 로드 실패:', error);
        reviewsGrid.innerHTML = `
          <div class="review-card">
            <p class="review-text">리뷰를 불러오는 중 오류가 발생했습니다.</p>
          </div>
        `;
        return;
      }

      if (!reviews || reviews.length === 0) {
        reviewsGrid.innerHTML = `
          <div class="review-card">
            <p class="review-text">아직 등록된 리뷰가 없습니다. 첫 번째 리뷰를 남겨보세요!</p>
          </div>
        `;
        return;
      }

      // 평점 높고 글자수 많은 순으로 정렬
      const sortedReviews = reviews
        .sort((a, b) => {
          // 1차: 평점 높은 순
          if (b.rating !== a.rating) {
            return b.rating - a.rating;
          }
          // 2차: 글자수 많은 순
          if ((b.content?.length || 0) !== (a.content?.length || 0)) {
            return (b.content?.length || 0) - (a.content?.length || 0);
          }
          // 3차: 최신순
          return new Date(b.created_at) - new Date(a.created_at);
        })
        .slice(0, 6); // 최대 6개만 표시

      // 이메일 마스킹 함수
      function maskEmail(email) {
        if (!email || typeof email !== 'string') return '익명';
        
        const atIndex = email.indexOf('@');
        if (atIndex === -1) return email; // @ 없으면 원본 반환 (실명)
        
        const localPart = email.substring(0, atIndex);
        const domain = email.substring(atIndex);
        
        if (localPart.length <= 2) {
          return localPart[0] + '*'.repeat(localPart.length - 1) + domain;
        } else if (localPart.length <= 4) {
          return localPart[0] + '*'.repeat(localPart.length - 2) + localPart[localPart.length - 1] + domain;
        } else {
          const start = localPart.substring(0, 2);
          const end = localPart.substring(localPart.length - 2);
          const middle = '*'.repeat(localPart.length - 4);
          return start + middle + end + domain;
        }
      }

      // 별점 표시 함수
      function renderStars(rating) {
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 >= 0.5;
        let starsHtml = '';
        
        for (let i = 0; i < fullStars; i++) {
          starsHtml += '<i class="fas fa-star"></i>';
        }
        
        if (hasHalfStar) {
          starsHtml += '<i class="fas fa-star-half-alt"></i>';
        }
        
        const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
        for (let i = 0; i < emptyStars; i++) {
          starsHtml += '<i class="far fa-star"></i>';
        }
        
        return starsHtml;
      }

      // 랜덤 아바타 생성 함수
      function getRandomAvatar(index) {
        const avatars = [
          'https://images.pexels.com/photos/1382731/pexels-photo-1382731.jpeg?auto=compress&cs=tinysrgb&w=100',
          'https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=100',
          'https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100',
          'https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=100',
          'https://images.pexels.com/photos/1043471/pexels-photo-1043471.jpeg?auto=compress&cs=tinysrgb&w=100',
          'https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=100'
        ];
        return avatars[index % avatars.length];
      }

      // 랜덤 지역 생성 함수
      reviewsGrid.innerHTML = sortedReviews.map((review, index) => {
        const mateName = review.mate_profiles?.profiles?.full_name || '메이트';
        const authorName = maskEmail(review.author_name || '익명');
        const reviewDate = new Date(review.created_at).toLocaleDateString('ko-KR', { 
          year: 'numeric', 
          month: 'long' 
        });
        const avatar = getRandomAvatar(index);
        
        return `
          <div class="review-card">
            <div class="review-header">
              <div class="reviewer-info">
                <img src="${avatar}" alt="${authorName}" class="reviewer-avatar">
                <div>
                  <h4 class="reviewer-name">${authorName}</h4>
                </div>
              </div>
            </div>
            <p class="review-text">"${review.content}"</p>
            <div class="review-rating">
              ${renderStars(review.rating)}
            </div>
            <p class="review-date">${reviewDate}</p>
            <div class="review-mate" style="margin-top: 12px; padding: 8px 12px; background: rgba(102, 126, 234, 0.1); border-radius: 8px; font-size: 0.9rem; color: var(--text-secondary);">
              메이트 <strong>${mateName}</strong> 님과 함께한 여행
            </div>
          </div>
        `;
      }).join('');


    } catch (error) {
      console.error('리뷰 로드 중 오류:', error);
      reviewsGrid.innerHTML = `
        <div class="review-card">
          <p class="review-text">리뷰를 불러오는 중 오류가 발생했습니다.</p>
        </div>
      `;
    }
  }
</script>




<body>
    <div id="app-nav"></div>
    
    <header class="header">
        <nav class="nav">
            <div class="container">
                <div class="nav-brand">
                    <img src="puzzmi_original.png" alt="PUZZMI 로고" class="logo">
                    <span>PUZZMI</span>
                </div>
            </div>
        </nav>
    </header>

    <section id="home" class="hero">
        <div class="hero-bg"></div>
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title" data-key="hero-title">잊을 수 없는 추억을<br>당신께 선물합니다</h1>
                <p class="hero-subtitle" data-key="hero-subtitle">현지 친구와 함께 맛집, 핫플레이스, 숨겨진 명소까지!<br>추억의 퍼즐을 맞춰가세요</p>
                

            </div>
        </div>
    </section>

<section id="about" class="about">
  <div class="container about-content">


    <div class="about-text">
  <h2 class="section-title">'PUZZMI'는 어떤 서비스인가요?</h2>

   <div class="about-gallery">
  <figure class="about-photo">
    <img src="about1.png" alt="PUZZMI 소개 사진 1" />
  </figure>
  <figure class="about-photo">
    <img src="about2.png" alt="PUZZMI 소개 사진 2" />
  </figure>
  <figure class="about-photo">
    <img src="about3.png" alt="PUZZMI 소개 사진 3" />
  </figure>
</div>

  <!-- 핵심 한 줄 카피(리드) -->
  <p class="lead-copy">당신의 '함께 가고 싶다'는 마음을 이루어 드리는 서비스!</p>

  <!-- 보조 카피(두 줄) -->
  <p class="section-subtitle">
    한국인과 함께 언어 교환과 문화 교류를 하며 여행을 특별한 추억으로!
     <br><span class="nobr">우리는 그냥 '가이드'가 아니라 '친구'입니다!</span>

  </p>

  <!-- 베네핏 리스트(체크 아이콘 + 설명) -->
  <ul class="benefits">
    <li>
      <div class="icon">✓</div>
      <div class="text">
        <strong>혼자서는 갈 수 없는 맛집과 카페를 즐기자!</strong><br>
        현지 친구와 함께라면 로컬 인기 맛집도 문제 없어요! 언어장벽 걱정 없이 한국을 마음껏 즐겨보세요!
      </div>
    </li>
    <li>
      <div class="icon">✓</div>
      <div class="text">
        <strong>가이드북에는 없는 나만의 한국을 찾아보자!</strong><br>
        가이드북에는 없는, 현지인만 아는 숨은 맛집도 소개합니다. 인기 관광지와 함께 한국의 매력을 마음껏 즐겨보세요.
      </div>
    </li>
    <li>
      <div class="icon">✓</div>
      <div class="text">
        <strong>주변과 차이나는 한국 여행을!!</strong><br>
        한국인 '여성' 메이트와 함께 한국의 최신 트렌드를 실감나게 체험할 수 있어요! 메이크업과 패션, 최신 카페 최신 명소까지 한국의 "지금"을 만끽!
      </div>
    </li>
     <li>
      <div class="icon">✓</div>
      <div class="text">
        <strong>언어 장벽도 걱정 마세요！</strong><br>
        한국어가 불안해도 안심하세요. 주문, 교통, 쇼핑, 길안내 등 잘 도와드리겠습니다! 스트레스 없이 여행을 즐길 수 있습니다!
      </div>
    </li>
  </ul>

  <!-- 마무리 메시지(인용 카드) -->
  <div class="about-quote">
    <span class="quote-mark">"</span>
     당신의 한국에서의 여행을 최고의 시간으로 만들어 드리겠습니다！
  </div>
</div>
</section>

<!-- ✅ NEW: SAFETY SECTION -->
<section id="safety" class="safety">
  <div class="container">
    <div class="section-header" data-eyebrow="SAFETY">
      <h2 class="section-title">PUZZMI의 안심할 수 있는 구조</h2>
      <p class="section-subtitle">처음이라도 안심하고 즐길 수 있는 3가지 핵심</p>
    </div>

    <ul class="safety-grid">
      <li class="safety-card reveal">
        <figure class="safety-media">
          <img src="safety1.png" alt="메이트 본인확인 일러스트" width="96" height="96" />
        </figure>
        <div class="safety-copy">
          <h3>메이트의 본인확인</h3>
          <p>
            친구는 신분증을 통한 본인 확인 외에 <strong>면접</strong>을 실시하여
            대응력과 매너도 확인합니다. 믿을 수 있는 친구가 안전하고 즐거운 시간을 제공합니다.
          </p>
        </div>
      </li>

      <li class="safety-card reveal">
        <figure class="safety-media">
          <img src="safety2.png" alt="일본인 스태프 상주 일러스트" width="96" height="96" />
        </figure>
        <div class="safety-copy">
          <h3>일본인 스태프 상주</h3>
          <p>
            일본인 직원이 상주하여 <strong>언어·문화</strong> 장벽을 낮추고,
            처음 이용하시는 분도 안심하고 이용할 수 있습니다.
          </p>
        </div>
      </li>

        <li class="safety-card reveal">
        <figure class="safety-media">
          <img src="safety3.png" alt="지원 및 상담 운영 일러스트" width="96" height="96" />
        </figure>
        <div class="safety-copy">
          <h3>지원 및 상담 운영</h3>
          <p>
            이용 중 문제가 생겨도 <strong>신속한 상담</strong>으로 대응합니다.
            언제든지 문의하세요.
          </p>
        </div>
      </li>
    </ul>
  </div>
</section>



    <section id="friends" class="friends">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title" data-key="friends-title">우리 친구들을 만나보세요</h2>
      <p class="section-subtitle" data-key="friends-subtitle">좋아하는 것도, 맛집도, 최신 트렌드도 다 얘기할 수 있는 친구와 함께!</p>
    </div>

    <div class="friend-filters">
      <button class="filter-btn active" data-filter="all" data-key="filter-all">전체</button>
    </div>

    <!-- ★ JS가 카드를 채워 넣을 컨테이너 -->
    <div class="friends-grid"></div>
    <!-- ✅ 더 보기 버튼 -->
<div class="friends-actions" style="text-align:center; margin-top:12px;">
  <button id="loadMore" class="cta-btn" style="display:none">더 보기</button>
</div>
  </div>
</section>

    <section id="how-it-works" class="how-it-works">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title" data-key="how-title">이용 방법</h2>
                <p class="section-subtitle" data-key="how-subtitle">서울에서의 하루가 당신의 소중한 추억이 되길 바랍니다.</p>
            </div>
            
            <div class="steps">
                <div class="step">
                    <div class="step-number">01</div>
                    <div class="step-content">
                        <h3 class="step-title" data-key="step1-title">메이트 선택</h3>
                        <p class="step-description" data-key="step1-desc">프로필을 보고 취향에 맞는 친구를 선택하세요. 언어, 관심사, 전문분야를 확인할 수 있어요.</p>
                    </div>
                    <div class="step-icon">
                        <i class="fas fa-user-check"></i>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">02</div>
                    <div class="step-content">
                        <h3 class="step-title" data-key="step2-title">일정 예약</h3>
                        <p class="step-description" data-key="step2-desc">원하는 날짜와 시간, 활동을 선택하여 예약하세요. 메이트와 미리 채팅으로 계획을 세울 수 있어요.</p>
                    </div>
                    <div class="step-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">03</div>
                    <div class="step-content">
                        <h3 class="step-title" data-key="step3-title">만나서 즐기기</h3>
                        <p class="step-description" data-key="step3-desc">약속 장소에서 친구를 만나 서울의 진짜 매력을 경험하세요. 평생 잊지 못할 추억을 만들어보세요!</p>
                    </div>
                    <div class="step-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="reviews" class="reviews">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title" data-key="reviews-title">추억의 퍼즐을 맞춰보세요</h2>
                <p class="section-subtitle" data-key="reviews-subtitle">PUZZMI와 함께한 여행객들의 진솔한 이야기</p>
            </div>
            
            <div class="reviews-grid" id="reviewsGrid">
                <!-- 실제 리뷰 데이터가 여기에 로드됩니다 -->
            </div>
        </div>
    </section>

    <!-- 기존 문의하기 섹션 주석 처리
    <section id="contact" class="contact">
        <div class="container">
            <div class="contact-content">
                <div class="contact-info">
                    <h2 class="section-title" data-key="contact-title">문의하기</h2>
                    <p class="contact-description" data-key="contact-desc">궁금한 점이 있으시거나 특별한 요청이 있으시면 언제든 연락주세요. 24시간 고객지원팀이 도와드려요.</p>
                    
                    <div class="contact-details">
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <h4 data-key="contact-email-title">이메일</h4>
                                <p>hello@seoulddays.com</p>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <div>
                                <h4 data-key="contact-phone-title">전화</h4>
                                <p>+82-2-1234-5678</p>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                <h4 data-key="contact-address-title">주소</h4>
                                <p data-key="contact-address">서울특별시 강남구 테헤란로 123</p>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <i class="fas fa-clock"></i>
                            <div>
                                <h4 data-key="contact-hours-title">운영시간</h4>
                                <p data-key="contact-hours">24시간 연중무휴</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="social-links">
                        <a href="#" class="social-link">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
                
                <div class="contact-form-container">
                    <form class="contact-form">
                        <div class="form-group">
                            <input type="text" placeholder="이름" data-placeholder-key="form-name" required>
                        </div>
                        <div class="form-group">
                            <input type="email" placeholder="이메일 주소" data-placeholder-key="form-email" required>
                        </div>
                        <div class="form-group">
                            <input type="text" placeholder="제목" data-placeholder-key="form-subject" required>
                        </div>
                        <div class="form-group">
                            <textarea placeholder="메시지를 입력해주세요" data-placeholder-key="form-message" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" data-key="form-submit">메시지 보내기</button>
                    </form>
                </div>
            </div>
        </div>
    </section>
    -->

    <section id="contact" class="contact">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">자주 묻는 질문 (FAQ)</h2>
                <p class="section-subtitle">PUZZMI 서비스에 대해 궁금한 점들을 확인해보세요</p>
            </div>
            
            <div class="faq-content">
                <!-- 서비스 소개 -->
                <div class="faq-category reveal">
                    <h3 class="faq-category-title">
                        <i class="fas fa-info-circle"></i>
                        서비스 소개
                    </h3>
                    
                    <div class="faq-item reveal">
                        <div class="faq-question">
                            <i class="fas fa-question-circle"></i>
                            <span>Q1. 렌탈 친구란 무엇입니까?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>함께 관광이나 밥을 가주는 '친구'를 일정시간 대여할 수 있는 서비스입니다. 연애 목적이 아니라 어디까지나 친구로서의 교류입니다.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item reveal">
                        <div class="faq-question">
                            <i class="fas fa-question-circle"></i>
                            <span>Q2. 연애나 만남 목적으로 이용할 수 있습니까?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>아니요. 본 서비스는 건전한 친구관계에 기반한 교류를 목적으로 하며, 연애·성적인 관계는 금지하고 있습니다. 여러분이 기분 좋게 교류할 수 있는 환경 만들기에 협력해 주세요.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item reveal">
                        <div class="faq-question">
                            <i class="fas fa-question-circle"></i>
                            <span>Q3. 누가 이용할 수 있나요?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>원칙적으로 만 18세 이상인 분을 대상으로 하지만, 만 18세 미만의 경우 성인 보호자가 함께하시면 이용이 가능합니다.<br>또한 이용약관을 준수하실 수 있는 분이라면 누구나 이용하실 수 있습니다.</p>
                        </div>
                    </div>
                </div>
                
                <!-- 예약, 요금 -->
                <div class="faq-category reveal">
                    <h3 class="faq-category-title">
                        <i class="fas fa-credit-card"></i>
                        예약, 요금에 대해
                    </h3>
                    
                    <div class="faq-item reveal">
                        <div class="faq-question">
                            <i class="fas fa-question-circle"></i>
                            <span>Q1. 결제 방법은 무엇인가요?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>결제는 신용카드로만 가능합니다.<br>(Visa / MasterCard / JCB / AMEX 등 사용 가능)</p>
                        </div>
                    </div>
                    
                    <div class="faq-item reveal">
                        <div class="faq-question">
                            <i class="fas fa-question-circle"></i>
                            <span>Q2. 당일 예약이 가능한가요?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>예약 상황에 따라 다르지만, 가능한 한 당일 예약도 최대한 도와드리겠습니다.<br>원활한 안내를 위해 가급적 전날까지 예약해 주시길 권해드립니다.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item reveal">
                        <div class="faq-question">
                            <i class="fas fa-question-circle"></i>
                            <span>Q3. 식사비나 교통비는 어떻게 되나요?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>원칙적으로 렌탈 친구의 식사비와 교통비는 고객님께서 부담하셔야 합니다.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item reveal">
                        <div class="faq-question">
                            <i class="fas fa-question-circle"></i>
                            <span>Q4. 추가 비용이 발생하는 경우가 있나요?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>기본적으로 표시된 요금 외에 추가 비용은 발생하지 않습니다.<br>이용 시간 연장을 원하실 경우, 부담 갖지 마시고 언제든지 편하게 상담해 주세요.<br>최대한 유연하게 도와드리겠습니다.</p>
                        </div>
                    </div>
                </div>
                
                <!-- 안심·안전 -->
                <div class="faq-category reveal">
                    <h3 class="faq-category-title">
                        <i class="fas fa-shield-alt"></i>
                        안심·안전에 대하여
                    </h3>
                    
                    <div class="faq-item reveal">
                        <div class="faq-question">
                            <i class="fas fa-question-circle"></i>
                            <span>Q1. '메이트'의 신원은 제대로 확인되어 있나요?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>네, 안심하셔도 됩니다.<br>저희 서비스에서는 등록하는 메이트에게 신분증을 통한 본인 확인을 반드시 시행하고 있습니다. 또한, 직원과의 면담도 진행하여 안전성과 신뢰성을 꼼꼼하게 확인하고 있습니다.<br>고객님께서 안심하고 즐거운 시간을 보내실 수 있도록 만전을 기하고 있습니다.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item reveal">
                        <div class="faq-question">
                            <i class="fas fa-question-circle"></i>
                            <span>Q2. 문제가 있는 경우는?</span>
                            <i class="fas fa-chevron-down faq-toggle"></i>
                        </div>
                        <div class="faq-answer">
                            <p>이용 중 문제가 발생할 경우 언제든지 운영으로 연락주시기 바랍니다. 일본인 스탭이 신속하고 정중하게 대응해, 상황에 따라 환불이나 적절한 대응책을 안내해 드립니다.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="nav-brand">
                        <span>PUZZMI</span>
                    </div>
                    <p class="footer-description" data-key="footer-desc">잊을 수 없는 추억을 당신께 선물합니다</p>
                </div>
                
                <div class="footer-links">
                    <div class="footer-column">
                        <h4 data-key="footer-service">서비스</h4>
                        <ul>
                            <li><a href="#" data-key="footer-pricing">요금안내</a></li>
                            <li><a href="#" data-key="footer-safety">안전정책</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4 data-key="footer-support">고객지원</h4>
                        <ul>
                            <li><a href="#" data-key="footer-help">도움말</a></li>
                            <li><a href="#" data-key="footer-faq">자주묻는질문</a></li>
                            <li><a href="#" data-key="footer-contact-us">문의하기</a></li>
                            <li><a href="#" data-key="footer-refund">환불정책</a></li>
                        </ul>
                    </div>
                  
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 PUZZMI. <span data-key="footer-rights">All rights reserved.</span></p>
                <div class="business-info">
                    <p>PUZZMI | 서울특별시 영등포구 디지털로 48길 23-1</p>
                    <p>사업자번호 716-10-02780 | 대표 최서준</p>
                </div>
                <div class="footer-legal">
                    <a href="#" data-key="footer-terms">이용약관</a>
                    <a href="#" data-key="footer-privacy">개인정보처리방침</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <div class="floating-actions" aria-label="빠른 실행 버튼">
  <a href="https://instagram.com/puzzmi_official" target="_blank" class="floating-btn insta" aria-label="Instagram">
    <i class="fab fa-instagram" aria-hidden="true"></i><span>Instagram</span>
  </a>
  <a href="https://lin.ee/NbNPSUz" target="_blank" class="floating-btn line" aria-label="LINE">
    <i class="fab fa-line" aria-hidden="true"></i><span>LINE</span>
  </a>
  <a href="https://x.com/puzzmi19889" target="_blank" class="floating-btn x" aria-label="X (Twitter)">
  <i class="fa-brands fa-x-twitter" aria-hidden="true"></i><span>X</span>
</a>
  <!-- 문의하기 버튼으로 변경 -->
  <a href="qna.html" class="floating-btn book" aria-label="문의하기">
    <i class="fas fa-question-circle" aria-hidden="true"></i><span>문의하기</span>
  </a>
</div>
</body>
</html>