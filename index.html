<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PUZZMI - ì„œìš¸ ë Œíƒˆì¹œêµ¬ ì„œë¹„ìŠ¤</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="nav.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Noto+Sans+KR:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;700;800&family=Noto+Sans+KR:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@600;800&family=Noto+Sans+KR:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles_hero_patch_2b.css">
    <link rel="stylesheet" href="styles_swipe_patch.css">
    <link rel="stylesheet" href="styles_hero_zoom_tune.css">
    <link rel="stylesheet" href="styles_hero_desktop_fit.css">
</head>

<body class="bg-cream">
    <div id="app-nav"></div>
    
    <!-- Supabase JS v2 (ESM) -->
    <script type="module">
      // nav.jsì—ì„œ ë§Œë“  ì‹±ê¸€í†¤ supabase ì¬ì‚¬ìš© (ì¤‘ë³µ ì¸ìŠ¤í„´ìŠ¤ ë°©ì§€)
      import { supabase } from "./nav.js";

      // ===== 1) ë©”ì´íŠ¸ ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜) =====
      const ONLY_VERIFIED = false;          // ê³µê°œë§Œ ë…¸ì¶œí•˜ë ¤ë©´ true
      const PAGE_SIZE     = 8;
      let page = 0, isLoading = false, hasMore = true;

      const grid = document.querySelector(".friends-grid");
      const loadMoreBtn = document.getElementById("loadMore");

      async function refreshHeartCount() {
        const badges = Array.from(document.querySelectorAll('.heart-badge[data-heart]'));
        if (!badges.length) return;

        const ids = [...new Set(badges.map(b => b.getAttribute('data-heart')).filter(Boolean))];

        // ê° ë©”ì´íŠ¸ë³„ ì°œ ê°œìˆ˜ ì¡°íšŒ
        const { data, error } = await supabase
          .from('favorites')
          .select('mate_id')
          .in('mate_id', ids);

        if (error) {
          console.warn('heart refresh error:', error);
          return;
        }
        
        const counts = {};
        for (const row of (data || [])) {
          counts[row.mate_id] = (counts[row.mate_id] || 0) + 1;
        }

        for (const id of ids) {
          const n = counts[id] || 0;
          const el = document.querySelector(`.heart-badge[data-heart="${id}"] .count`);
          if (el) el.textContent = n;
        }
      }
      
      // storage key â†’ public URL
      function keyToUrl(key) {
        if (!key) return "";
        if (/^https?:\/\//i.test(key)) return key;
        const pure = key.startsWith("mates/") ? key.replace(/^mates\//,"") : key;
        return supabase.storage.from("mates").getPublicUrl(pure).data.publicUrl;
      }

      // ì„±ë³„ â†’ ê¸°í˜¸
      function genderIcon(gender) {
        const g = (gender || "").toString().trim().toLowerCase();
        if (["female","f","ì—¬","ì—¬ì","woman","ì—¬ì„±"].includes(g)) return "â™€";
        if (["male","m","ë‚¨","ë‚¨ì","man","ë‚¨ì„±"].includes(g))   return "â™‚";
        return "âš§";
      }

      // ì¹´ë“œ ë Œë”
      function renderCard(row) {
        const name   = row.profiles?.full_name ?? "ì´ë¦„ ë¹„ê³µê°œ";
        const age    = row.profiles?.age ? `${row.profiles.age}ì„¸` : "";
        const gender = row.profiles?.gender ?? "";
        const langs  = Array.isArray(row.profiles?.languages) ? row.profiles.languages : [];
        const gIcon  = genderIcon(gender);

        const keys   = Array.isArray(row.photos) ? row.photos : [];
        const cover  = row.primary_photo || keys[0] || row.profiles?.avatar_url || "https://picsum.photos/seed/puzzmi/400/300";
        const img    = cover.startsWith("http") ? cover : keyToUrl(cover);

        const priceJpy = new Intl.NumberFormat("ja-JP", { style: "currency", currency: "JPY", maximumFractionDigits: 0 }).format(4000);
        const tagsTxt  = (row.tags ?? []).slice(0,3).join(", ") || "ì„œìš¸ íˆ¬ì–´";
        const subline  = [gIcon, age].filter(Boolean).join(" â€¢ ");

        const card = document.createElement("div");
        card.className = "friend-card";
        card.innerHTML = `
          <div class="friend-image">
            <img src="${img}" alt="${name}">
            <div class="heart-badge" data-heart="${row.user_id}" style="position:absolute;right:8px;top:8px;background:#e0245e;color:#fff;border-radius:16px;padding:4px 8px;font-size:12px;display:flex;gap:6px;align-items:center;">
              <i class="fas fa-heart"></i><span class="count">0</span>
            </div>
          </div>
          <div class="friend-info">
            <h3 class="friend-name">${name}</h3>
            <p class="friend-age">${subline || "ì •ë³´ ë¯¸ê¸°ì¬"}</p>
            <p class="friend-specialties">${tagsTxt}</p>
            <p class="friend-description">${row.bio ?? "í•¨ê»˜ ì„œìš¸ì˜ ìˆ¨ì€ ëª…ì†Œë¥¼ ì¦ê²¨ë´ìš”!"}</p>
            <div class="friend-languages">
              ${langs.map(l => `<span class="language">${l}</span>`).join("")}
            </div>
            <div class="friend-price">
              <span class="price">${priceJpy}</span><span class="duration">/æ™‚é–“</span>
            </div>
            <div style="margin-top:10px; display:flex; gap:8px;">
              <a class="cta-btn" data-requires-auth="true" href="mate_like.html?mate_id=${row.user_id}">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’è¦‹ã‚‹</a>
              <a class="cta-btn" data-requires-auth="true" href="booking.html?mate_id=${row.user_id}">äºˆç´„ã™ã‚‹</a>
              <a class="cta-btn" data-fav-mate="${row.user_id}">ãŠæ°—ã«å…¥ã‚Š</a>
            </div>
          </div>
        `;
        grid.appendChild(card);
      }

      async function loadMates({ reset=false } = {}) {
        if (!grid || isLoading || (!hasMore && !reset)) return;
        if (reset) { page = 0; hasMore = true; grid.innerHTML = ""; }

        isLoading = true;
        const from = page * PAGE_SIZE;
        const to   = from + PAGE_SIZE - 1;

        // Retry logic for network issues
        let retryCount = 0;
        const maxRetries = 3;
        
        while (retryCount < maxRetries) {
          try {
            let query = supabase
              .from("mate_profiles")
              .select(`
                user_id, bio, hourly_rate, tags, areas, is_verified, rating, photos, primary_photo,
                profiles:profiles ( id, full_name, age, gender, languages, avatar_url )
              `, { count: "exact" })
              .order("rating", { ascending: false })
              .range(from, to);

            if (ONLY_VERIFIED) query = query.eq("is_verified", true);

            const { data, error, count } = await query;

            if (error) {
              throw error;
            }

            // Success - process the data
            (data || []).forEach(renderCard);

            const fetched = (data || []).length;
            const total   = typeof count === "number" ? count : (from + fetched);
            hasMore = (from + fetched) < total;

            if (loadMoreBtn) loadMoreBtn.style.display = hasMore ? "inline-block" : "none";
            if (hasMore) page += 1;

            isLoading = false;
            return; // Success, exit retry loop
            
          } catch (error) {
            console.error(`loadMates error (attempt ${retryCount + 1}):`, error);
            retryCount++;
            
            if (retryCount >= maxRetries) {
              // Final failure after all retries
              if (!grid.innerHTML) {
                grid.innerHTML = `
                  <div style="padding:16px; text-align:center;">
                    <p>ë©”ì´íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>
                    <p style="font-size:0.9em; color:#666; margin-top:8px;">
                      ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.
                    </p>
                    <button onclick="location.reload()" style="margin-top:12px; padding:8px 16px; background:#667eea; color:white; border:none; border-radius:4px; cursor:pointer;">
                      ìƒˆë¡œê³ ì¹¨
                    </button>
                  </div>
                `;
              }
              loadMoreBtn && (loadMoreBtn.style.display = "none");
              isLoading = false;
              return;
            }
            
            // Wait before retry (exponential backoff)
            await new Promise(resolve => setTimeout(resolve, Math.pow(2, retryCount) * 1000));
          }
        }
      }

      loadMoreBtn?.addEventListener("click", () => loadMates());

      // ===== 3) ì¸ì¦ ê°€ë“œ & ì°œí•˜ê¸° ì²˜ë¦¬ =====

      // ì°œí•˜ê¸° ê¸°ëŠ¥
      document.addEventListener('click', async (e) => {
        const btn = e.target.closest('[data-fav-mate]');
        if (!btn) return;
        e.preventDefault();
        
        // ë¡œê·¸ì¸ ì²´í¬
        const { data: { user }, error: authErr } = await supabase.auth.getUser();
        if (authErr || !user) {
          const redir = encodeURIComponent(location.pathname + location.search);
          location.href = `auth_combo.html?redirect=${redir}`;
          return;
        }

        const mateId = btn.getAttribute('data-fav-mate');
        const originalText = btn.textContent;
        btn.disabled = true;
        btn.textContent = 'ì²˜ë¦¬ì¤‘...';

        try {
          // ì´ë¯¸ ì°œí–ˆëŠ”ì§€ í™•ì¸
          const { data: existing } = await supabase
            .from('favorites')
            .select('id')
            .eq('user_id', user.id)
            .eq('mate_id', mateId)
            .maybeSingle();

          if (existing) {
            // ì´ë¯¸ ì°œí•œ ê²½ìš° - ì°œ í•´ì œ
            const { error } = await supabase
              .from('favorites')
              .delete()
              .eq('user_id', user.id)
              .eq('mate_id', mateId);
            
            if (error) throw error;
            
            btn.textContent = 'ì°œí•˜ê¸°';
            btn.classList.remove('is-faved');
            showToast('ğŸ’” ì°œ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤');
          } else {
            // ì°œí•˜ê¸°
            const { error } = await supabase
              .from('favorites')
              .insert({ user_id: user.id, mate_id: mateId });
            
            if (error) throw error;
            
            btn.textContent = 'ì°œ ì™„ë£Œ';
            btn.classList.add('is-faved');
            showToast('ğŸ’– ì°œ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
          }

          // í•˜íŠ¸ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
          await refreshHeartCount();
          
        } catch (error) {
          console.error('ì°œí•˜ê¸° ì˜¤ë¥˜:', error);
          btn.textContent = originalText;
          showToast('âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
        } finally {
          btn.disabled = false;
        }
      });

      // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í•¨ìˆ˜
      function showToast(message) {
        const toast = document.createElement('div');
        toast.style.cssText = `
          position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white; padding: 12px 24px; border-radius: 12px;
          z-index: 9999; font-weight: 600; box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
          animation: slideDown 0.3s ease;
        `;
        toast.textContent = message;
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
      }

      // ì´ˆê¸° ì‹¤í–‰
      (async () => {
        await loadMates({ reset: true });
        await refreshHeartCount();
        await loadHomepageReviews();
        
        // ìë™ ì™„ë£Œ ì²´í¬ ì‹¤í–‰
        try {
          const { autoCompleteBookings } = await import('./auto_complete_bookings.js');
          await autoCompleteBookings();
          // 5ë¶„ë§ˆë‹¤ ìë™ ì™„ë£Œ ì²´í¬
          setInterval(autoCompleteBookings, 5 * 60 * 1000);
        } catch (error) {
          console.warn('ìë™ ì™„ë£Œ ê¸°ëŠ¥ ë¡œë“œ ì‹¤íŒ¨:', error);
        }
      })();

      // ===== 4) ë©”ì¸í˜ì´ì§€ ë¦¬ë·° ë¡œë“œ =====
      async function loadHomepageReviews() {
        const reviewsGrid = document.getElementById('reviewsGrid');
        if (!reviewsGrid) return;

        try {
          // í‰ì  ë†’ê³  ê¸€ììˆ˜ ë§ì€ ìˆœìœ¼ë¡œ ë¦¬ë·° ê°€ì ¸ì˜¤ê¸°
          const { data: reviews, error } = await supabase
            .from('reviews')
            .select(`
              id, content, rating, created_at, author_name,
              mate_profiles!inner (
                user_id,
                profiles!inner ( full_name )
              )
            `)
            .not('content', 'is', null)
            .order('rating', { ascending: false })
            .limit(50); // ë§ì´ ê°€ì ¸ì™€ì„œ JSì—ì„œ ì •ë ¬

          if (error) {
            console.error('ë¦¬ë·° ë¡œë“œ ì‹¤íŒ¨:', error);
            reviewsGrid.innerHTML = `
              <div class="review-card">
                <p class="review-text">ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
              </div>
            `;
            return;
          }

          if (!reviews || reviews.length === 0) {
            reviewsGrid.innerHTML = `
              <div class="review-card">
                <p class="review-text">ì•„ì§ ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ë¦¬ë·°ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”!</p>
              </div>
            `;
            return;
          }

          // í‰ì  ë†’ê³  ê¸€ììˆ˜ ë§ì€ ìˆœìœ¼ë¡œ ì •ë ¬
          const sortedReviews = reviews
            .sort((a, b) => {
              // 1ì°¨: í‰ì  ë†’ì€ ìˆœ
              if (b.rating !== a.rating) {
                return b.rating - a.rating;
              }
              // 2ì°¨: ê¸€ììˆ˜ ë§ì€ ìˆœ
              if ((b.content?.length || 0) !== (a.content?.length || 0)) {
                return (b.content?.length || 0) - (a.content?.length || 0);
              }
              // 3ì°¨: ìµœì‹ ìˆœ
              return new Date(b.created_at) - new Date(a.created_at);
            })
            .slice(0, 6); // ìµœëŒ€ 6ê°œë§Œ í‘œì‹œ

          // ì´ë©”ì¼ ë§ˆìŠ¤í‚¹ í•¨ìˆ˜
          function maskEmail(email) {
            if (!email || typeof email !== 'string') return 'ìµëª…';
            
            const atIndex = email.indexOf('@');
            if (atIndex === -1) return email; // @ ì—†ìœ¼ë©´ ì›ë³¸ ë°˜í™˜ (ì‹¤ëª…)
            
            const localPart = email.substring(0, atIndex);
            const domain = email.substring(atIndex);
            
            if (localPart.length <= 2) {
              return localPart[0] + '*'.repeat(localPart.length - 1) + domain;
            } else if (localPart.length <= 4) {
              return localPart[0] + '*'.repeat(localPart.length - 2) + localPart[localPart.length - 1] + domain;
            } else {
              const start = localPart.substring(0, 2);
              const end = localPart.substring(localPart.length - 2);
              const middle = '*'.repeat(localPart.length - 4);
              return start + middle + end + domain;
            }
          }

          // ë³„ì  í‘œì‹œ í•¨ìˆ˜
          function renderStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            let starsHtml = '';
            
            for (let i = 0; i < fullStars; i++) {
              starsHtml += '<i class="fas fa-star"></i>';
            }
            
            if (hasHalfStar) {
              starsHtml += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
              starsHtml += '<i class="far fa-star"></i>';
            }
            
            return starsHtml;
          }

          // ëœë¤ ì•„ë°”íƒ€ ìƒì„± í•¨ìˆ˜
          function getRandomAvatar(index) {
            const avatars = [
              'https://images.pexels.com/photos/1382731/pexels-photo-1382731.jpeg?auto=compress&cs=tinysrgb&w=100',
              'https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=100',
              'https://images.pexels.com/photos/1542085/pexels-photo-1542085.jpeg?auto=compress&cs=tinysrgb&w=100',
              'https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=100',
              'https://images.pexels.com/photos/1043471/pexels-photo-1043471.jpeg?auto=compress&cs=tinysrgb&w=100',
              'https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=100'
            ];
            return avatars[index % avatars.length];
          }

          // ëœë¤ ì§€ì—­ ìƒì„± í•¨ìˆ˜
          reviewsGrid.innerHTML = sortedReviews.map((review, index) => {
            const mateName = review.mate_profiles?.profiles?.full_name || 'ë©”ì´íŠ¸';
            const authorName = maskEmail(review.author_name || 'ìµëª…');
            const reviewDate = new Date(review.created_at).toLocaleDateString('ko-KR', { 
              year: 'numeric', 
              month: 'long' 
            });
            const avatar = getRandomAvatar(index);
            
            return `
              <div class="review-card">
                <div class="review-header">
                  <div class="reviewer-info">
                    <img src="${avatar}" alt="${authorName}" class="reviewer-avatar">
                    <div>
                      <h4 class="reviewer-name">${authorName}</h4>
                    </div>
                  </div>
                </div>
                <p class="review-text">"${review.content}"</p>
                <div class="review-rating">
                  ${renderStars(review.rating)}
                </div>
                <p class="review-date">${reviewDate}</p>
                <div class="review-mate" style="margin-top: 12px; padding: 8px 12px; background: rgba(102, 126, 234, 0.1); border-radius: 8px; font-size: 0.9rem; color: var(--text-secondary);">
                  ãƒ¡ã‚¤ãƒˆ <strong>${mateName}</strong> ã•ã‚“ã¨ã®æ—…
                </div>
              </div>
            `;
          }).join('');


        } catch (error) {
          console.error('ë¦¬ë·° ë¡œë“œ ì¤‘ ì˜¤ë¥˜:', error);
          reviewsGrid.innerHTML = `
            <div class="review-card">
              <p class="review-text">ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
            </div>
          `;
        }
      }
    </script>

    <script type="module" src="nav.js"></script>
    
    <section id="home" class="hero">
        <div class="hero-bg"></div>
        <div class="hero-overlay"></div>
    </section>

<section id="about" class="about">
  <div class="container">
    <div class="section-header" data-eyebrow="ABOUT">
      <h2 class="section-title">''PUZZMI'ã¨ã¯ã©ã‚“ãªã‚µãƒ¼ãƒ“ã‚¹ï¼Ÿ</h2>
      <p class="section-subtitle">ã‚ãªãŸã®"â¼€ç·’ã«â¾ããŸã„"ã¨ã„ã†æ°—æŒã¡ã‚’å¶ãˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ï¼</p>
    </div>

    <!-- ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆ -->
    <div class="about-grid">
      <div class="about-card">
        <div class="about-card-image">
          <img src="about1.png" alt="PUZZMI ì†Œê°œ ì‚¬ì§„ 1" />
        </div>
        <div class="about-card-content">
          <h3>ä¸€äººã§ã¯è¡Œã‘ãªã„ã€ãŠåº—ã€ã‚°ãƒ«ãƒ¡ã‚„ã‚«ãƒ•ã‚§ã‚’æ¥½ã—ã‚‚ã†ï¼</h3>
          <p>ç¾åœ°ã®å‹é”ã¨ä¸€ç·’ãªã‚‰ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚°ãƒ«ãƒ¡ã‚‚å®‰å¿ƒï¼è¨€è‘‰ã®å£ã‚’æ°—ã«ã›ãšã€éŸ“å›½ã‚’æ€ã„ã£ãã‚Šæ¥½ã—ã‚‚ã†ï¼</p>
        </div>
      </div>
      
      <div class="about-card">
        <div class="about-card-image">
          <img src="about2.png" alt="PUZZMI ì†Œê°œ ì‚¬ì§„ 2" />
        </div>
        <div class="about-card-content">
          <h3>ã‚¬ã‚¤ãƒ‰ãƒ–ãƒƒã‚¯ã«è¼‰ã£ã¦ã„ãªã„ã€ã‚ãªãŸã ã‘ã®éŸ“å›½ã‚’è¦‹ã¤ã‘ã‚ˆã†ï¼</h3>
          <p>ã‚¬ã‚¤ãƒ‰ãƒ–ãƒƒã‚¯ã«ã¯è¼‰ã£ã¦ã„ãªã„ã€åœ°å…ƒã®äººã ã‘ãŒçŸ¥ã£ã¦ã„ã‚‹éš ã‚ŒãŸååº—ã‚‚ã”ç´¹ä»‹ã—ã¾ã™ã€‚äººæ°—è¦³å…‰åœ°ã¨ã‚ã‚ã›ã¦ã€éŸ“å›½ã®é­…åŠ›ã‚’å­˜åˆ†ã«ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚</p>
        </div>
      </div>
      
      <div class="about-card">
        <div class="about-card-image">
          <img src="about3.png" alt="PUZZMI ì†Œê°œ ì‚¬ì§„ 3" />
        </div>
        <div class="about-card-content">
          <h3>å‘¨ã‚Šã¨å·®ãŒã¤ãéŸ“å›½æ—…è¡Œã‚’ï¼</h3>
          <p>ç¾åœ°éŸ“å›½å¥³å­ã¨ã€éŸ“å›½ã®æœ€æ–°ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ãƒªã‚¢ãƒ«ã«ä½“é¨“ã§ãã¾ã™ï¼ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚„ã‚³ã‚¹ãƒ¡ã€è©±é¡Œã®ã‚«ãƒ•ã‚§ã‚„æœ€æ–°ã‚¹ãƒãƒƒãƒˆã¾ã§éŸ“å›½ã®ã€Œä»Šã€ã‚’æº€å–«ã—ã‚ˆã†ï¼</p>
        </div>
      </div>
      
</section>

<section id="safety" class="safety">
  <div class="container">
    <div class="section-header" data-eyebrow="SAFETY">
      <h2 class="section-title">ã“ã“ãŒã¡ãŒã†ï¼ PUZZMIã®å®‰å…¨ãƒ»å®‰å¿ƒã®ä»•çµ„ã¿</h2>
      <p class="section-subtitle">ã¯ã˜ã‚ã¦ã§ã‚‚å®‰å¿ƒã®3ã¤ã®ãƒã‚¤ãƒ³ãƒˆ</p>
    </div>

    <!-- ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆ -->
    <div class="safety-grid">
      <div class="safety-card">
        <div class="safety-card-image">
          <img src="safety1.png" alt="ë©”ì´íŠ¸ ë³¸ì¸í™•ì¸ ì¼ëŸ¬ìŠ¤íŠ¸" />
        </div>
        <div class="safety-card-content">
          <h3>ãƒ¡ã‚¤ãƒˆå…¨å“¡ã®æœ¬äººç¢ºèª</h3>
          <p>ãƒ¡ã‚¤ãƒˆå…¨å“¡ãŒèº«åˆ†è¨¼ã«ã‚ˆã‚‹æœ¬äººç¢ºèªã«åŠ ãˆã€<strong>é¢æ¥</strong>ã§å¯¾å¿œåŠ›ã‚„ãƒãƒŠãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãŠã‚Šã¾ã™ã€‚ä¿¡é ¼ã§ãã‚‹ãƒ¡ã‚¤ãƒˆã¨ã€å®‰å…¨ã§æ¥½ã—ã„æ™‚é–“ã‚’æä¾›ã„ãŸã—ã¾ã™ã€‚</p>
        </div>
      </div>
      
      <div class="safety-card">
        <div class="safety-card-image">
          <img src="safety2.png" alt="ì¼ë³¸ì¸ ìŠ¤íƒœí”„ ìƒì£¼ ì¼ëŸ¬ìŠ¤íŠ¸" />
        </div>
        <div class="safety-card-content">
          <h3>æ—¥æœ¬äººã‚¹ã‚¿ãƒƒãƒ•ã®å¸¸é§</h3>
          <p>æ—¥æœ¬äººã‚¹ã‚¿ãƒƒãƒ•ãŒå¸¸é§ã—ã¦ã„ã‚‹ãŸã‚ã€<strong>è¨€èªÂ·æ–‡åŒ–</strong>ã®å£ã‚’æ°—ã«ã›ãšã€åˆã‚ã¦ã®æ–¹ã‚‚å®‰å¿ƒã—ã¦ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚</p>
        </div>
      </div>
      
      <div class="safety-card">
        <div class="safety-card-image">
          <img src="safety3.png" alt="ì§€ì› ë° ìƒë‹´ ìš´ì˜ ì¼ëŸ¬ìŠ¤íŠ¸" />
        </div>
        <div class="safety-card-content">
          <h3>å®‰å…¨ãƒ»å®‰å¿ƒã®ã‚µãƒãƒ¼ãƒˆãƒ»ç›¸è«‡ä½“åˆ¶</h3>
          <p>ä¸‡ãŒä¸€ã”åˆ©ç”¨ä¸­ã«å•é¡ŒãŒèµ·ãã¦ã‚‚ã€<strong>è¿…é€Ÿãªå¯¾å¿œ</strong>ã§ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚ã„ã¤ã§ã‚‚ãŠæ°—è»½ã«ã”ç›¸è«‡ãã ã•ã„ã¾ã›ã€‚</p>
        </div>
      </div>
    </div>
  </div>
</section>

    <section id="friends" class="friends">
      <div class="container">
        <div class="section-header" data-eyebrow="FRIENDS">
          <h2 class="section-title" data-key="friends-title">ãƒ¡ã‚¤ãƒˆã«ä¼šã£ã¦ã¿ã‚ˆã†</h2>
          <p class="section-subtitle" data-key="friends-subtitle">è¶£å‘³ã‚‚ã€ã‚°ãƒ«ãƒ¡ã‚‚ã€æœ€æ–°ãƒˆãƒ¬ãƒ³ãƒ‰ã‚‚ã€ä¸€ç·’ã«æ¥½ã—ã‚ã‚‹å‹é”ã¨ï¼</p>
        </div>

        <div class="friend-filters">
          <button class="quick-filter active" data-filter="all" data-key="filter-all">ã™ã¹ã¦è¦‹ã‚‹</button>
        </div>

        <!-- JSê°€ ì¹´ë“œë¥¼ ì±„ì›Œ ë„£ì„ ì»¨í…Œì´ë„ˆ -->
        <div class="friends-grid"></div>
        
        <!-- ë” ë³´ê¸° ë²„íŠ¼ -->
        <div class="friends-actions text-center">
          <button id="loadMore" class="btn btn-primary btn-lg" style="display:none">
            <i class="fas fa-plus"></i>
            ë” ë³´ê¸°
          </button>
        </div>
      </div>
    </section>

    <section id="reviews" class="reviews">
        <div class="container">
            <div class="section-header" data-eyebrow="REVIEWS">
                <h2 class="section-title" data-key="reviews-title">æ€ã„å‡ºã®ãƒ‘ã‚ºãƒ«ã‚’å®Œæˆã•ã›ã‚ˆã†</h2>
                <p class="section-subtitle" data-key="reviews-subtitle">PUZZMIã¨ä¸€ç·’ã«æ—…ã—ãŸãŠå®¢æ§˜ã®ã®è²´é‡ãªå£°</p>
            </div>
            
            <div class="reviews-grid" id="reviewsGrid">
                <!-- ì‹¤ì œ ë¦¬ë·° ë°ì´í„°ê°€ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">

            <div class="footer-content">
                <div class="footer-brand">
                    <div class="nav-brand">
                        <img src="puzzmi_original.png" alt="PUZZMI ë¡œê³ ">
                        <span>PUZZMI</span>
                    </div>
                    <p class="footer-description" data-key="footer-desc">ä¸€ç”Ÿå¿˜ã‚Œãªã„ã¨ã£ã¦ãŠãã®ç¬é–“ã‚’ã‚ãªãŸã«ï¼</p>
                </div>
                
            </div>
            
            <div class="footer-bottom">
               <!-- <p>&copy; 2025 PUZZMI. <span data-key="footer-rights">All rights reserved.</span></p>
                <div class="business-info">
                    <p>PUZZMI | ì„œìš¸íŠ¹ë³„ì‹œ ì˜ë“±í¬êµ¬ ë””ì§€í„¸ë¡œ 48ê¸¸ 23-1</p>
                    <p>ì‚¬ì—…ìë²ˆí˜¸ 716-10-02780 | ëŒ€í‘œ ìµœì„œì¤€</p>
                </div> --> 
                <div class="footer-legal">
                    <a href="terms_of_service.html" data-key="footer-terms">ã”åˆ©ç”¨è¦ç´„</a>
                    <a href="privacy_policy.html" data-key="footer-privacy">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
                    <a href="refund_policy.html" data-key="footer-refund">æ‰•æˆ»Â·å–æ¶ˆç´„æ¬¾</a>
                    <a href="tokusho.html">ç‰¹å®šå•†å–å¼•æ³•ã«åŸºã¥ãè¡¨è¨˜</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="swipe-hero.js"></script>
   

    <div class="floating-actions" aria-label="ë¹ ë¥¸ ì‹¤í–‰ ë²„íŠ¼">
      <a href="https://instagram.com/puzzmi_official" target="_blank" class="floating-btn insta" aria-label="Instagram">
        <i class="fab fa-instagram" aria-hidden="true"></i><span>Instagram</span>
      </a>
      <a href="https://lin.ee/NbNPSUz" target="_blank" class="floating-btn line" aria-label="LINE">
        <i class="fab fa-line" aria-hidden="true"></i><span>LINE</span>
      </a>
      <a href="https://x.com/puzzmi19889" target="_blank" class="floating-btn x" aria-label="X (Twitter)">
        <i class="fa-brands fa-x-twitter" aria-hidden="true"></i><span>X</span>
      </a>
      <a href="service_intro.html" class="floating-btn book" aria-label="ã‚µãƒ¼ãƒ“ã‚¹ç´¹ä»‹">
        <i class="fas fa-info-circle" aria-hidden="true"></i><span>ã‚µãƒ¼ãƒ“ã‚¹ç´¹ä»‹</span>
      </a>
      <a href="qna.html" class="floating-btn book" aria-label="ãŠå•ã„åˆã‚ã›" style="bottom: 140px;">
        <i class="fas fa-question-circle" aria-hidden="true"></i><span>ãŠå•ã„åˆã‚ã›</span>
      </a>
    </div>
</body>
</html>