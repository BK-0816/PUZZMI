<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê²°ì œ ë§í¬ í…ŒìŠ¤íŠ¸</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      margin-bottom: 20px;
    }
    .test-section {
      margin: 20px 0;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }
    .test-section h3 {
      margin-top: 0;
      color: #667eea;
    }
    .checklist {
      list-style: none;
      padding: 0;
    }
    .checklist li {
      padding: 10px 0;
      border-bottom: 1px solid #e0e0e0;
    }
    .checklist li:last-child {
      border-bottom: none;
    }
    .status-ok { color: #28a745; font-weight: bold; }
    .status-error { color: #dc3545; font-weight: bold; }
    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      margin: 10px 0;
    }
    button:hover {
      background: #5568d3;
    }
    .info-box {
      background: #fff3cd;
      border: 1px solid #ffc107;
      padding: 15px;
      border-radius: 6px;
      margin: 20px 0;
    }
    code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ§ª ê²°ì œ í˜ì´ì§€ í…ŒìŠ¤íŠ¸</h1>

    <div class="info-box">
      <strong>âš ï¸ ì¤‘ìš”:</strong> LINEì—ì„œ ë³´ì´ëŠ” CSP ì—ëŸ¬ëŠ” LINEì˜ ë¯¸ë¦¬ë³´ê¸° ì‹œìŠ¤í…œ ë•Œë¬¸ì…ë‹ˆë‹¤.<br>
      ì‹¤ì œ ê²°ì œ í˜ì´ì§€ê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ ì•„ë˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ í™•ì¸í•˜ì„¸ìš”.
    </div>

    <div class="test-section">
      <h3>âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
      <ul class="checklist">
        <li>
          <input type="checkbox" id="check1">
          <label for="check1">ê²°ì œ í˜ì´ì§€ê°€ í™”ë©´ì— í‘œì‹œë˜ì—ˆë‚˜ìš”? (ë³´ë¼ìƒ‰ ê·¸ë¼ë°ì´ì…˜ ë°°ê²½)</label>
        </li>
        <li>
          <input type="checkbox" id="check2">
          <label for="check2">"ğŸ’³ ê²°ì œí•˜ê¸°" ì œëª©ì´ ë³´ì´ë‚˜ìš”?</label>
        </li>
        <li>
          <input type="checkbox" id="check3">
          <label for="check3">ì£¼ë¬¸ë²ˆí˜¸, ìƒí’ˆëª…, ê²°ì œê¸ˆì•¡ ì •ë³´ê°€ í‘œì‹œë˜ë‚˜ìš”?</label>
        </li>
        <li>
          <input type="checkbox" id="check4">
          <label for="check4">"ğŸ”’ ì•ˆì „ê²°ì œ ì‹¤í–‰" ë²„íŠ¼ì´ ë³´ì´ë‚˜ìš”?</label>
        </li>
        <li>
          <input type="checkbox" id="check5">
          <label for="check5">ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ KGì´ë‹ˆì‹œìŠ¤ ê²°ì œì°½ì´ ì—´ë¦¬ë‚˜ìš”?</label>
        </li>
      </ul>
    </div>

    <div class="test-section">
      <h3>ğŸ“Š ê²°ê³¼ íŒì •</h3>
      <button onclick="checkResults()">ê²°ê³¼ í™•ì¸</button>
      <div id="result"></div>
    </div>

    <div class="test-section">
      <h3>ğŸ” CSP ì—ëŸ¬ ì›ì¸</h3>
      <p>LINE ë©”ì‹ ì €ëŠ” ë§í¬ë¥¼ ë³´ë‚¼ ë•Œ ìë™ìœ¼ë¡œ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ìƒì„±í•˜ë ¤ê³  í•©ë‹ˆë‹¤.</p>
      <p>ì´ ê³¼ì •ì—ì„œ <code>iframe</code>ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ë©°, ë§¤ìš° ì œí•œì ì¸ ìƒŒë“œë°•ìŠ¤ í™˜ê²½ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.</p>
      <p><strong>ì´ê²ƒì€ ì •ìƒì ì¸ í˜„ìƒ</strong>ì´ë©°, ì‹¤ì œ ì‚¬ìš©ìê°€ ë§í¬ë¥¼ í´ë¦­í–ˆì„ ë•ŒëŠ” ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.</p>
    </div>

    <div class="test-section">
      <h3>ğŸ”§ ì½˜ì†” ì—ëŸ¬ vs ì‹¤ì œ ê¸°ëŠ¥</h3>
      <table style="width: 100%; border-collapse: collapse;">
        <tr style="background: #f8f9fa;">
          <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">ìƒí™©</th>
          <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">ì½˜ì†” ì—ëŸ¬</th>
          <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">ì‹¤ì œ ê¸°ëŠ¥</th>
        </tr>
        <tr>
          <td style="padding: 10px; border: 1px solid #ddd;">LINE ë¯¸ë¦¬ë³´ê¸°</td>
          <td style="padding: 10px; border: 1px solid #ddd;" class="status-error">âŒ ì—ëŸ¬ ë°œìƒ</td>
          <td style="padding: 10px; border: 1px solid #ddd;">í•´ë‹¹ ì—†ìŒ (ë¯¸ë¦¬ë³´ê¸°ì¼ ë¿)</td>
        </tr>
        <tr>
          <td style="padding: 10px; border: 1px solid #ddd;">ì‚¬ìš©ìê°€ ë§í¬ í´ë¦­</td>
          <td style="padding: 10px; border: 1px solid #ddd;">ì—ëŸ¬ ë¬´ì‹œ</td>
          <td style="padding: 10px; border: 1px solid #ddd;" class="status-ok">âœ… ì •ìƒ ì‘ë™</td>
        </tr>
      </table>
    </div>

    <div class="test-section">
      <h3>ğŸ’¡ ë‹¤ìŒ ë‹¨ê³„</h3>
      <ol>
        <li>ìœ„ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ëª¨ë‘ í™•ì¸í•˜ì„¸ìš”</li>
        <li>5ê°œ ëª¨ë‘ ì²´í¬ë˜ë©´ <strong>ê²°ì œ ì‹œìŠ¤í…œì´ ì •ìƒ ì‘ë™</strong>í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤</li>
        <li>ì½˜ì†” ì—ëŸ¬ëŠ” ë¬´ì‹œí•˜ê³  ì‹¤ì œ ê²°ì œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ì„¸ìš”</li>
      </ol>
    </div>
  </div>

  <script>
    function checkResults() {
      const checks = [
        document.getElementById('check1').checked,
        document.getElementById('check2').checked,
        document.getElementById('check3').checked,
        document.getElementById('check4').checked,
        document.getElementById('check5').checked,
      ];

      const checkedCount = checks.filter(c => c).length;
      const resultDiv = document.getElementById('result');

      if (checkedCount === 5) {
        resultDiv.innerHTML = `
          <div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 6px; margin-top: 15px;">
            <strong>âœ… ì™„ë²½í•©ë‹ˆë‹¤!</strong><br>
            ê²°ì œ ì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br>
            ì½˜ì†”ì˜ CSP ì—ëŸ¬ëŠ” LINE ë¯¸ë¦¬ë³´ê¸° ë•Œë¬¸ì´ë©°, ì‹¤ì œ ê²°ì œì—ëŠ” ì˜í–¥ì´ ì—†ìŠµë‹ˆë‹¤.<br><br>
            <strong>Supabase Edge Functionì€ ì •ìƒì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤!</strong>
          </div>
        `;
      } else if (checkedCount >= 3) {
        resultDiv.innerHTML = `
          <div style="background: #fff3cd; color: #856404; padding: 15px; border-radius: 6px; margin-top: 15px;">
            <strong>âš ï¸ ë¶€ë¶„ ì •ìƒ</strong><br>
            ${checkedCount}/5 í•­ëª©ì´ ì •ìƒì…ë‹ˆë‹¤.<br>
            ë‚˜ë¨¸ì§€ í•­ëª©ì„ í™•ì¸í•´ë³´ì„¸ìš”.
          </div>
        `;
      } else {
        resultDiv.innerHTML = `
          <div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 6px; margin-top: 15px;">
            <strong>âŒ ë¬¸ì œ ë°œê²¬</strong><br>
            ê²°ì œ í˜ì´ì§€ê°€ ì œëŒ€ë¡œ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.<br>
            ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.
          </div>
        `;
      }
    }
  </script>
</body>
</html>
